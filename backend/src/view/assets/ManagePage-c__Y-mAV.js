import{a4 as X,ag as pe,b7 as le,bq as L,ah as N,aI as F,b6 as A,b9 as ve,ak as se,aZ as fe,al as be,r as O,c as _e,a$ as ge,a3 as k,aT as Ne,br as he,a5 as Ve,o as ye,av as Ee,d as g,e as B,ap as ee,g as n,v as U,bg as R,h as f,w as y,x as z,bc as Ie,bs as we,A as H,q as Z,bt as xe,bu as Se,aV as Y,m as Te,aj as Pe,b2 as te,b3 as K,am as ke,b8 as Ae,aB as Fe,_ as Be,b as Ce,s as Me,a as $e,f as x,t as G,E as De,bv as Re,j as ze,i as Ke,k as Le,bw as Oe,n as Ue,p as je}from"./index-mqPUoEfO.js";import{E as qe}from"./el-alert-lohTw_Eb.js";import{a as ne}from"./index--fUdzZmG.js";import{E as We}from"./index-CCnng1Ex.js";const Ye=100,Ge=600,ae={beforeMount(r,E){const o=E.value,{interval:a=Ye,delay:h=Ge}=X(o)?{}:o;let c,m;const l=()=>X(o)?o():o.handler(),v=()=>{m&&(clearTimeout(m),m=void 0),c&&(clearInterval(c),c=void 0)};r.addEventListener("mousedown",b=>{b.button===0&&(v(),l(),document.addEventListener("mouseup",()=>v(),{once:!0}),m=setTimeout(()=>{c=setInterval(()=>{l()},a)},h))})}},He=pe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ve,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||N(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),Ze={[le]:(r,E)=>E!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[L]:r=>N(r)||F(r),[A]:r=>N(r)||F(r)},Je=["aria-label","onKeydown"],Qe=["aria-label","onKeydown"],Xe=se({name:"ElInputNumber"}),et=se({...Xe,props:He,emits:Ze,setup(r,{expose:E,emit:o}){const a=r,{t:h}=fe(),c=be("input-number"),m=O(),l=_e({currentValue:a.modelValue,userInput:null}),{formItem:v}=ge(),b=k(()=>N(a.modelValue)&&a.modelValue<=a.min),d=k(()=>N(a.modelValue)&&a.modelValue>=a.max),I=k(()=>{const e=w(a.step);return K(a.precision)?Math.max(w(a.modelValue),e):(e>a.precision,a.precision)}),S=k(()=>a.controls&&a.controlsPosition==="right"),C=Ne(),V=he(),T=k(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if(F(e))return"";if(N(e)){if(Number.isNaN(e))return"";K(a.precision)||(e=e.toFixed(a.precision))}return e}),P=(e,t)=>{if(K(t)&&(t=I.value),t===0)return Math.round(e);let s=String(e);const u=s.indexOf(".");if(u===-1||!s.replace(".","").split("")[u+t])return e;const $=s.length;return s.charAt($-1)==="5"&&(s=`${s.slice(0,Math.max(0,$-1))}6`),Number.parseFloat(Number(s).toFixed(t))},w=e=>{if(F(e))return 0;const t=e.toString(),s=t.indexOf(".");let u=0;return s!==-1&&(u=t.length-s-1),u},J=(e,t=1)=>N(e)?P(e+a.step*t):l.currentValue,j=()=>{if(a.readonly||V.value||d.value)return;const e=Number(T.value)||0,t=J(e);M(t),o(L,l.currentValue),W()},q=()=>{if(a.readonly||V.value||b.value)return;const e=Number(T.value)||0,t=J(e,-1);M(t),o(L,l.currentValue),W()},Q=(e,t)=>{const{max:s,min:u,step:i,precision:_,stepStrictly:$,valueOnClear:D}=a;s<u&&ke("InputNumber","min should not be greater than max.");let p=Number(e);if(F(e)||Number.isNaN(p))return null;if(e===""){if(D===null)return null;p=Ae(D)?{min:u,max:s}[D]:D}return $&&(p=P(Math.round(p/i)*i,_)),K(_)||(p=P(p,_)),(p>s||p<u)&&(p=p>s?s:u,t&&o(A,p)),p},M=(e,t=!0)=>{var s;const u=l.currentValue,i=Q(e);if(!t){o(A,i);return}u===i&&e||(l.userInput=null,o(A,i),u!==i&&o(le,i,u),a.validateEvent&&((s=v==null?void 0:v.validate)==null||s.call(v,"change").catch(_=>te())),l.currentValue=i)},oe=e=>{l.userInput=e;const t=e===""?null:Number(e);o(L,t),M(t,!1)},re=e=>{const t=e!==""?Number(e):"";(N(t)&&!Number.isNaN(t)||e==="")&&M(t),W(),l.userInput=null},ue=()=>{var e,t;(t=(e=m.value)==null?void 0:e.focus)==null||t.call(e)},ie=()=>{var e,t;(t=(e=m.value)==null?void 0:e.blur)==null||t.call(e)},ce=e=>{o("focus",e)},de=e=>{var t;l.userInput=null,o("blur",e),a.validateEvent&&((t=v==null?void 0:v.validate)==null||t.call(v,"blur").catch(s=>te()))},W=()=>{l.currentValue!==a.modelValue&&(l.currentValue=a.modelValue)},me=e=>{document.activeElement===e.target&&e.preventDefault()};return Ve(()=>a.modelValue,(e,t)=>{const s=Q(e,!0);l.userInput===null&&s!==t&&(l.currentValue=s)},{immediate:!0}),ye(()=>{var e;const{min:t,max:s,modelValue:u}=a,i=(e=m.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(s)?i.setAttribute("aria-valuemax",String(s)):i.removeAttribute("aria-valuemax"),Number.isFinite(t)?i.setAttribute("aria-valuemin",String(t)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),i.setAttribute("aria-disabled",String(V.value)),!N(u)&&u!=null){let _=Number(u);Number.isNaN(_)&&(_=null),o(A,_)}}),Ee(()=>{var e,t;const s=(e=m.value)==null?void 0:e.input;s==null||s.setAttribute("aria-valuenow",`${(t=l.currentValue)!=null?t:""}`)}),E({focus:ue,blur:ie}),(e,t)=>(g(),B("div",{class:U([n(c).b(),n(c).m(n(C)),n(c).is("disabled",n(V)),n(c).is("without-controls",!e.controls),n(c).is("controls-right",n(S))]),onDragstart:t[0]||(t[0]=Y(()=>{},["prevent"]))},[e.controls?ee((g(),B("span",{key:0,role:"button","aria-label":n(h)("el.inputNumber.decrease"),class:U([n(c).e("decrease"),n(c).is("disabled",n(b))]),onKeydown:R(q,["enter"])},[f(n(H),null,{default:y(()=>[n(S)?(g(),z(n(Ie),{key:0})):(g(),z(n(we),{key:1}))]),_:1})],42,Je)),[[n(ae),q]]):Z("v-if",!0),e.controls?ee((g(),B("span",{key:1,role:"button","aria-label":n(h)("el.inputNumber.increase"),class:U([n(c).e("increase"),n(c).is("disabled",n(d))]),onKeydown:R(j,["enter"])},[f(n(H),null,{default:y(()=>[n(S)?(g(),z(n(xe),{key:0})):(g(),z(n(Se),{key:1}))]),_:1})],42,Qe)),[[n(ae),j]]):Z("v-if",!0),f(n(Te),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":n(T),placeholder:e.placeholder,readonly:e.readonly,disabled:n(V),size:n(C),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:me,onKeydown:[R(Y(j,["prevent"]),["up"]),R(Y(q,["prevent"]),["down"])],onBlur:de,onFocus:ce,onInput:oe,onChange:re},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var tt=Pe(et,[["__file","input-number.vue"]]);const nt=Fe(tt),at={class:"page"},lt={class:"page-box"},st={class:"nav-box"},ot={class:"nav"},rt={class:"nav-text"},ut={key:0,class:"panel user"},it={__name:"ManagePage",setup(r){const E=Ce(),{settings:o}=Me(E),a=Ke("langs");$e();const h=O(0),c=O(),m=b=>{h.value=b},l=O(0),v=async()=>{ne.confirm(a[o.value.lang].manage.generate_invitation_confirm,a[o.value.lang].reconfirmation,{confirmButtonText:a[o.value.lang].confirm,cancelButtonText:a[o.value.lang].cancel,type:"warning"}).then(async()=>{let b=await Le("POST","/api/user/invite",{count:l.value}).catch(d=>(We({message:d.msg,type:"error",plain:!0}),console.error(d)));b.code===0&&ne({title:a[o.value.lang].manage.invitation_link_title,message:()=>Oe("p",{ref:c,style:"cursor: pointer",onClick:()=>{let d=document.createRange();d.selectNode(c.value);let I=document.getSelection();I.removeAllRanges(),I.addRange(d)}},`${window.location.protocol}//${window.location.host}/register?invitation=${b.data}`)})})};return(b,d)=>{const I=H,S=qe,C=nt,V=Ue,T=je,P=De;return g(),B("main",at,[x("div",lt,[x("div",st,[x("div",ot,[x("div",{class:U(["nav-item",{active:h.value==0}]),onClick:d[0]||(d[0]=w=>m(0))},[f(I,null,{default:y(()=>[f(n(Re))]),_:1}),x("span",rt,G(n(a)[n(o).lang].manage.nav_user),1)],2)])]),h.value==0?(g(),B("div",ut,[f(P,{class:"invite-form form",model:l.value,trigger:"change","label-width":"auto",style:{"max-width":"600px"},"hide-required-asterisk":""},{default:y(()=>[f(S,{class:"alert",type:"info","show-icon":"",closable:!1},{default:y(()=>[x("p",null,G(n(a)[n(o).lang].manage.alert_invite_user),1)]),_:1}),f(V,{label:n(a)[n(o).lang].manage.invite_count},{default:y(()=>[f(C,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=w=>l.value=w),min:0,max:50},null,8,["modelValue"])]),_:1},8,["label"]),f(V,{style:{float:"right"}},{default:y(()=>[f(T,{type:"primary",onClick:d[2]||(d[2]=w=>v()),disabled:l.value==0},{default:y(()=>[ze(G(n(a)[n(o).lang].manage.generate_invitation),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])):Z("",!0)])])}}},vt=Be(it,[["__scopeId","data-v-706d7179"]]);export{vt as default};
