import{aI as ee,af as h,aB as B,$ as fe,b9 as S,bv as O,bb as se,ag as ve,bh as be,a0 as _e,a1 as re,a_ as ge,a2 as Ne,r as U,a as he,b1 as Ve,a4 as k,b5 as R,aV as ye,bw as Ee,aj as Ie,o as we,an as xe,d as C,h as N,a8 as ne,q as J,f as v,g as t,bl as L,x as j,ao as z,w as _,y as K,be as Se,bx as Pe,v as Q,by as Ae,bz as Te,bA as ke,a9 as W,k as Be,b8 as te,a3 as Ce,bc as Fe,as as $e,_ as Me,u as De,s as Re,e as x,t as H,i as Le,E as ze,b as Ke,bB as Oe,j as Ue,l as je,m as Ye,n as qe,bC as Ge}from"./index-DGyKNxUo.js";import{E as We}from"./el-alert-BKD2_SyK.js";import{a as ae}from"./index-DIrPPTLl.js";import{E as He}from"./index-B8j5rCKw.js";import"./index-9z3CLSES.js";const Je=100,Qe=600,le={beforeMount(o,E){const r=E.value,{interval:a=Je,delay:V=Qe}=ee(r)?{}:r;let c,m;const s=()=>ee(r)?r():r.handler(),f=()=>{m&&(clearTimeout(m),m=void 0),c&&(clearInterval(c),c=void 0)};o.addEventListener("mousedown",b=>{b.button===0&&(f(),s(),document.addEventListener("mouseup",()=>f(),{once:!0}),m=setTimeout(()=>{c=setInterval(()=>{s()},a)},V))})}},Xe=fe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:be,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:o=>o===null||h(o)||["min","max"].includes(o),default:null},name:String,placeholder:String,precision:{type:Number,validator:o=>o>=0&&o===Number.parseInt(`${o}`,10)},validateEvent:{type:Boolean,default:!0},...ve(["ariaLabel"])}),Ze={[se]:(o,E)=>E!==o,blur:o=>o instanceof FocusEvent,focus:o=>o instanceof FocusEvent,[O]:o=>h(o)||B(o),[S]:o=>h(o)||B(o)},en=re({name:"ElInputNumber"}),nn=re({...en,props:Xe,emits:Ze,setup(o,{expose:E,emit:r}){const a=o,{t:V}=ge(),c=Ne("input-number"),m=U(),s=he({currentValue:a.modelValue,userInput:null}),{formItem:f}=Ve(),b=k(()=>h(a.modelValue)&&a.modelValue<=a.min),d=k(()=>h(a.modelValue)&&a.modelValue>=a.max),I=k(()=>{const e=w(a.step);return R(a.precision)?Math.max(w(a.modelValue),e):(e>a.precision,a.precision)}),P=k(()=>a.controls&&a.controlsPosition==="right"),F=ye(),y=Ee(),A=k(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(B(e))return"";if(h(e)){if(Number.isNaN(e))return"";R(a.precision)||(e=e.toFixed(a.precision))}return e}),T=(e,n)=>{if(R(n)&&(n=I.value),n===0)return Math.round(e);let l=String(e);const i=l.indexOf(".");if(i===-1||!l.replace(".","").split("")[i+n])return e;const M=l.length;return l.charAt(M-1)==="5"&&(l=`${l.slice(0,Math.max(0,M-1))}6`),Number.parseFloat(Number(l).toFixed(n))},w=e=>{if(B(e))return 0;const n=e.toString(),l=n.indexOf(".");let i=0;return l!==-1&&(i=n.length-l-1),i},X=(e,n=1)=>h(e)?T(e+a.step*n):s.currentValue,Y=()=>{if(a.readonly||y.value||d.value)return;const e=Number(A.value)||0,n=X(e);$(n),r(O,s.currentValue),G()},q=()=>{if(a.readonly||y.value||b.value)return;const e=Number(A.value)||0,n=X(e,-1);$(n),r(O,s.currentValue),G()},Z=(e,n)=>{const{max:l,min:i,step:u,precision:g,stepStrictly:M,valueOnClear:D}=a;l<i&&Ce("InputNumber","min should not be greater than max.");let p=Number(e);if(B(e)||Number.isNaN(p))return null;if(e===""){if(D===null)return null;p=Fe(D)?{min:i,max:l}[D]:D}return M&&(p=T(Math.round(p/u)*u,g),p!==e&&n&&r(S,p)),R(g)||(p=T(p,g)),(p>l||p<i)&&(p=p>l?l:i,n&&r(S,p)),p},$=(e,n=!0)=>{var l;const i=s.currentValue,u=Z(e);if(!n){r(S,u);return}i===u&&e||(s.userInput=null,r(S,u),i!==u&&r(se,u,i),a.validateEvent&&((l=f==null?void 0:f.validate)==null||l.call(f,"change").catch(g=>te())),s.currentValue=u)},oe=e=>{s.userInput=e;const n=e===""?null:Number(e);r(O,n),$(n,!1)},ie=e=>{const n=e!==""?Number(e):"";(h(n)&&!Number.isNaN(n)||e==="")&&$(n),G(),s.userInput=null},ue=()=>{var e,n;(n=(e=m.value)==null?void 0:e.focus)==null||n.call(e)},ce=()=>{var e,n;(n=(e=m.value)==null?void 0:e.blur)==null||n.call(e)},de=e=>{r("focus",e)},me=e=>{var n,l;s.userInput=null,s.currentValue===null&&((n=m.value)!=null&&n.input)&&(m.value.input.value=""),r("blur",e),a.validateEvent&&((l=f==null?void 0:f.validate)==null||l.call(f,"blur").catch(i=>te()))},G=()=>{s.currentValue!==a.modelValue&&(s.currentValue=a.modelValue)},pe=e=>{document.activeElement===e.target&&e.preventDefault()};return Ie(()=>a.modelValue,(e,n)=>{const l=Z(e,!0);s.userInput===null&&l!==n&&(s.currentValue=l)},{immediate:!0}),we(()=>{var e;const{min:n,max:l,modelValue:i}=a,u=(e=m.value)==null?void 0:e.input;if(u.setAttribute("role","spinbutton"),Number.isFinite(l)?u.setAttribute("aria-valuemax",String(l)):u.removeAttribute("aria-valuemax"),Number.isFinite(n)?u.setAttribute("aria-valuemin",String(n)):u.removeAttribute("aria-valuemin"),u.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),u.setAttribute("aria-disabled",String(y.value)),!h(i)&&i!=null){let g=Number(i);Number.isNaN(g)&&(g=null),r(S,g)}u.addEventListener("wheel",pe,{passive:!1})}),xe(()=>{var e,n;const l=(e=m.value)==null?void 0:e.input;l==null||l.setAttribute("aria-valuenow",`${(n=s.currentValue)!=null?n:""}`)}),E({focus:ue,blur:ce}),(e,n)=>(N(),C("div",{class:j([t(c).b(),t(c).m(t(F)),t(c).is("disabled",t(y)),t(c).is("without-controls",!e.controls),t(c).is("controls-right",t(P))]),onDragstart:W(()=>{},["prevent"])},[e.controls?ne((N(),C("span",{key:0,role:"button","aria-label":t(V)("el.inputNumber.decrease"),class:j([t(c).e("decrease"),t(c).is("disabled",t(b))]),onKeydown:L(q,["enter"])},[z(e.$slots,"decrease-icon",{},()=>[v(t(Q),null,{default:_(()=>[t(P)?(N(),K(t(Se),{key:0})):(N(),K(t(Pe),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[t(le),q]]):J("v-if",!0),e.controls?ne((N(),C("span",{key:1,role:"button","aria-label":t(V)("el.inputNumber.increase"),class:j([t(c).e("increase"),t(c).is("disabled",t(d))]),onKeydown:L(Y,["enter"])},[z(e.$slots,"increase-icon",{},()=>[v(t(Q),null,{default:_(()=>[t(P)?(N(),K(t(Ae),{key:0})):(N(),K(t(Te),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[t(le),Y]]):J("v-if",!0),v(t(Be),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":t(A),placeholder:e.placeholder,readonly:e.readonly,disabled:t(y),size:t(F),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[L(W(Y,["prevent"]),["up"]),L(W(q,["prevent"]),["down"])],onBlur:me,onFocus:de,onInput:oe,onChange:ie},ke({_:2},[e.$slots.prefix?{name:"prefix",fn:_(()=>[z(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:_(()=>[z(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var tn=_e(nn,[["__file","input-number.vue"]]);const an=$e(tn),ln={class:"page"},sn={class:"page-box"},rn={class:"nav-box"},on={class:"nav"},un={class:"nav-text"},cn={key:0,class:"panel user"},dn={__name:"ManagePage",setup(o){const E=De(),{settings:r}=Re(E),a=Le("langs");Ke();const V=U(0),c=U(),m=b=>{V.value=b},s=U(0),f=async()=>{ae.confirm(a[r.value.lang].manage.generate_invitation_confirm,a[r.value.lang].reconfirmation,{confirmButtonText:a[r.value.lang].confirm,cancelButtonText:a[r.value.lang].cancel,type:"warning"}).then(async()=>{let b=await qe("POST","/api/user/invite",{count:s.value}).catch(d=>(He({message:d.msg,type:"error",plain:!0}),console.error(d)));b.code===0&&ae({title:a[r.value.lang].manage.invitation_link_title,message:()=>Ge("p",{ref:c,style:"cursor: pointer",onClick:()=>{let d=document.createRange();d.selectNode(c.value);let I=document.getSelection();I.removeAllRanges(),I.addRange(d)}},`${window.location.protocol}//${window.location.host}/register?invitation=${b.data}`)})})};return(b,d)=>{const I=Q,P=We,F=an,y=Ue,A=je,T=ze;return N(),C("main",ln,[x("div",sn,[x("div",rn,[x("div",on,[x("div",{class:j(["nav-item",{active:V.value==0}]),onClick:d[0]||(d[0]=w=>m(0))},[v(I,null,{default:_(()=>[v(t(Oe))]),_:1}),x("span",un,H(t(a)[t(r).lang].manage.nav_user),1)],2)])]),V.value==0?(N(),C("div",cn,[v(T,{class:"invite-form form",model:s.value,trigger:"change","label-width":"auto",style:{"max-width":"600px"},"hide-required-asterisk":""},{default:_(()=>[v(P,{class:"alert",type:"info","show-icon":"",closable:!1},{default:_(()=>[x("p",null,H(t(a)[t(r).lang].manage.alert_invite_user),1)]),_:1}),v(y,{label:t(a)[t(r).lang].manage.invite_count},{default:_(()=>[v(F,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=w=>s.value=w),min:0,max:50},null,8,["modelValue"])]),_:1},8,["label"]),v(y,{style:{float:"right"}},{default:_(()=>[v(A,{type:"primary",onClick:d[2]||(d[2]=w=>f()),disabled:s.value==0},{default:_(()=>[Ye(H(t(a)[t(r).lang].manage.generate_invitation),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])):J("",!0)])])}}},_n=Me(dn,[["__scopeId","data-v-935cd51c"]]);export{_n as default};
